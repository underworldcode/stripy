<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.8.1" />
<title>stripy.hybrid_st_meshes API documentation</title>
<meta name="description" content="Copyright 2017-2019 Louis Moresi, Ben Mather â€¦" />
<link href='https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.0/normalize.min.css' rel='stylesheet'>
<link href='https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/8.0.0/sanitize.min.css' rel='stylesheet'>
<link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css" rel="stylesheet">
<style>.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script async src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS_CHTML'></script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>stripy.hybrid_st_meshes</code></h1>
</header>
<section id="section-intro">
<p>Copyright 2017-2019 Louis Moresi, Ben Mather</p>
<p>This file is part of Stripy.</p>
<p>Stripy is free software: you can redistribute it and/or modify
it under the terms of the GNU Lesser General Public License as published by
the Free Software Foundation, either version 3 of the License, or any later version.</p>
<p>Stripy is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
See the
GNU Lesser General Public License for more details.</p>
<p>You should have received a copy of the GNU Lesser General Public License
along with Stripy.
If not, see <a href="http://www.gnu.org/licenses/">http://www.gnu.org/licenses/</a>.</p>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">&#34;&#34;&#34;
Copyright 2017-2019 Louis Moresi, Ben Mather

This file is part of Stripy.

Stripy is free software: you can redistribute it and/or modify
it under the terms of the GNU Lesser General Public License as published by
the Free Software Foundation, either version 3 of the License, or any later version.

Stripy is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU Lesser General Public License for more details.

You should have received a copy of the GNU Lesser General Public License
along with Stripy.  If not, see &lt;http://www.gnu.org/licenses/&gt;.
&#34;&#34;&#34;

#!/usr/bin/python
# -*- coding: utf-8 -*-
from . import cartesian as _cartesian
import numpy as np

## The following are cartesian meshes warped into 3D
## such that the original x,y directions provide a natural metric
## for navigating the surface.
##
## These are useful for wrapping textures on surfaces
##
## Sphere (with x/y -&gt; lon/lat) and singular at the poles
## which cannot be meshed with sTriangulation
##
## Currently: XX,YY,ZZ are the R3 coords of the points
##            SS, TT are the normalised coordinates on the manifold
##            x,y are the original point locations
##            areas etc all refer to the undistorted mesh ( ... )
##
## Also possible: cylinder / torus (less useful for visualisation, I suppose ... LM)


class warped_xy_mesh_sphere(_cartesian.Triangulation):
    &#34;&#34;&#34;
    A lon/lat mesh on the sphere which, due to the poles, cannot be
    meshed directly with sTriangulation routines.

    This is a hybrid mesh which is calculated in a flat projection
    that corresponds to cartopy.crs.PlateCarree() but has associated
    (x,y,z) coordinates.

    The primary use case is visualisation with texture maps where the
    (s,t) coordinate system that is required on the surface has to map
    correctly for an (x,y) array of pixels.
    &#34;&#34;&#34;

    def __init__(self, res_lon, res_lat, epsilon=0.001):

        import numpy as np

        lon = np.linspace(0.0, 2.0*np.pi, res_lon, endpoint=True)
        lat = np.linspace(epsilon,  np.pi-epsilon,  res_lat, endpoint=True)
        lons, lats = np.meshgrid(lon, lat)
        lons = lons.reshape(-1)
        lats = lats.reshape(-1)

        XX = np.cos(lons) * np.sin(lats)
        YY = np.sin(lons) * np.sin(lats)
        ZZ = np.cos(lats)

        SS = lons / (2.0*np.pi)
        TT = lats / np.pi

        super(warped_xy_mesh_sphere, self).__init__(x=SS, y=TT, permute=True, tree=False)

        self.XX = XX
        self.YY = YY
        self.ZZ = ZZ

        self.SS = SS
        self.TT = TT

        ## how should we re-define things like self.areas, self.tree ??</code></pre>
</details>
</section>
<section>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-classes">Classes</h2>
<dl>
<dt id="stripy.hybrid_st_meshes.warped_xy_mesh_sphere"><code class="flex name class">
<span>class <span class="ident">warped_xy_mesh_sphere</span></span>
<span>(</span><span>res_lon, res_lat, epsilon=0.001)</span>
</code></dt>
<dd>
<div class="desc"><p>A lon/lat mesh on the sphere which, due to the poles, cannot be
meshed directly with sTriangulation routines.</p>
<p>This is a hybrid mesh which is calculated in a flat projection
that corresponds to cartopy.crs.PlateCarree() but has associated
(x,y,z) coordinates.</p>
<p>The primary use case is visualisation with texture maps where the
(s,t) coordinate system that is required on the surface has to map
correctly for an (x,y) array of pixels.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class warped_xy_mesh_sphere(_cartesian.Triangulation):
    &#34;&#34;&#34;
    A lon/lat mesh on the sphere which, due to the poles, cannot be
    meshed directly with sTriangulation routines.

    This is a hybrid mesh which is calculated in a flat projection
    that corresponds to cartopy.crs.PlateCarree() but has associated
    (x,y,z) coordinates.

    The primary use case is visualisation with texture maps where the
    (s,t) coordinate system that is required on the surface has to map
    correctly for an (x,y) array of pixels.
    &#34;&#34;&#34;

    def __init__(self, res_lon, res_lat, epsilon=0.001):

        import numpy as np

        lon = np.linspace(0.0, 2.0*np.pi, res_lon, endpoint=True)
        lat = np.linspace(epsilon,  np.pi-epsilon,  res_lat, endpoint=True)
        lons, lats = np.meshgrid(lon, lat)
        lons = lons.reshape(-1)
        lats = lats.reshape(-1)

        XX = np.cos(lons) * np.sin(lats)
        YY = np.sin(lons) * np.sin(lats)
        ZZ = np.cos(lats)

        SS = lons / (2.0*np.pi)
        TT = lats / np.pi

        super(warped_xy_mesh_sphere, self).__init__(x=SS, y=TT, permute=True, tree=False)

        self.XX = XX
        self.YY = YY
        self.ZZ = ZZ

        self.SS = SS
        self.TT = TT

        ## how should we re-define things like self.areas, self.tree ??</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="stripy.cartesian.Triangulation" href="cartesian.html#stripy.cartesian.Triangulation">Triangulation</a></li>
</ul>
<h3>Inherited members</h3>
<ul class="hlist">
<li><code><b><a title="stripy.cartesian.Triangulation" href="cartesian.html#stripy.cartesian.Triangulation">Triangulation</a></b></code>:
<ul class="hlist">
<li><code><a title="stripy.cartesian.Triangulation.areas" href="cartesian.html#stripy.cartesian.Triangulation.areas">areas</a></code></li>
<li><code><a title="stripy.cartesian.Triangulation.centroid_refine_triangulation_by_triangles" href="cartesian.html#stripy.cartesian.Triangulation.centroid_refine_triangulation_by_triangles">centroid_refine_triangulation_by_triangles</a></code></li>
<li><code><a title="stripy.cartesian.Triangulation.centroid_refine_triangulation_by_vertices" href="cartesian.html#stripy.cartesian.Triangulation.centroid_refine_triangulation_by_vertices">centroid_refine_triangulation_by_vertices</a></code></li>
<li><code><a title="stripy.cartesian.Triangulation.containing_simplex_and_bcc" href="cartesian.html#stripy.cartesian.Triangulation.containing_simplex_and_bcc">containing_simplex_and_bcc</a></code></li>
<li><code><a title="stripy.cartesian.Triangulation.containing_triangle" href="cartesian.html#stripy.cartesian.Triangulation.containing_triangle">containing_triangle</a></code></li>
<li><code><a title="stripy.cartesian.Triangulation.convex_hull" href="cartesian.html#stripy.cartesian.Triangulation.convex_hull">convex_hull</a></code></li>
<li><code><a title="stripy.cartesian.Triangulation.edge_lengths" href="cartesian.html#stripy.cartesian.Triangulation.edge_lengths">edge_lengths</a></code></li>
<li><code><a title="stripy.cartesian.Triangulation.edge_refine_triangulation_by_triangles" href="cartesian.html#stripy.cartesian.Triangulation.edge_refine_triangulation_by_triangles">edge_refine_triangulation_by_triangles</a></code></li>
<li><code><a title="stripy.cartesian.Triangulation.edge_refine_triangulation_by_vertices" href="cartesian.html#stripy.cartesian.Triangulation.edge_refine_triangulation_by_vertices">edge_refine_triangulation_by_vertices</a></code></li>
<li><code><a title="stripy.cartesian.Triangulation.face_midpoints" href="cartesian.html#stripy.cartesian.Triangulation.face_midpoints">face_midpoints</a></code></li>
<li><code><a title="stripy.cartesian.Triangulation.get_spline_tension_factors" href="cartesian.html#stripy.cartesian.Triangulation.get_spline_tension_factors">get_spline_tension_factors</a></code></li>
<li><code><a title="stripy.cartesian.Triangulation.gradient" href="cartesian.html#stripy.cartesian.Triangulation.gradient">gradient</a></code></li>
<li><code><a title="stripy.cartesian.Triangulation.gradient_local" href="cartesian.html#stripy.cartesian.Triangulation.gradient_local">gradient_local</a></code></li>
<li><code><a title="stripy.cartesian.Triangulation.identify_segments" href="cartesian.html#stripy.cartesian.Triangulation.identify_segments">identify_segments</a></code></li>
<li><code><a title="stripy.cartesian.Triangulation.identify_vertex_neighbours" href="cartesian.html#stripy.cartesian.Triangulation.identify_vertex_neighbours">identify_vertex_neighbours</a></code></li>
<li><code><a title="stripy.cartesian.Triangulation.identify_vertex_triangles" href="cartesian.html#stripy.cartesian.Triangulation.identify_vertex_triangles">identify_vertex_triangles</a></code></li>
<li><code><a title="stripy.cartesian.Triangulation.interpolate" href="cartesian.html#stripy.cartesian.Triangulation.interpolate">interpolate</a></code></li>
<li><code><a title="stripy.cartesian.Triangulation.interpolate_cubic" href="cartesian.html#stripy.cartesian.Triangulation.interpolate_cubic">interpolate_cubic</a></code></li>
<li><code><a title="stripy.cartesian.Triangulation.interpolate_linear" href="cartesian.html#stripy.cartesian.Triangulation.interpolate_linear">interpolate_linear</a></code></li>
<li><code><a title="stripy.cartesian.Triangulation.interpolate_nearest" href="cartesian.html#stripy.cartesian.Triangulation.interpolate_nearest">interpolate_nearest</a></code></li>
<li><code><a title="stripy.cartesian.Triangulation.interpolate_to_grid" href="cartesian.html#stripy.cartesian.Triangulation.interpolate_to_grid">interpolate_to_grid</a></code></li>
<li><code><a title="stripy.cartesian.Triangulation.join" href="cartesian.html#stripy.cartesian.Triangulation.join">join</a></code></li>
<li><code><a title="stripy.cartesian.Triangulation.midpoint_refine_triangulation_by_vertices" href="cartesian.html#stripy.cartesian.Triangulation.midpoint_refine_triangulation_by_vertices">midpoint_refine_triangulation_by_vertices</a></code></li>
<li><code><a title="stripy.cartesian.Triangulation.nearest_vertex" href="cartesian.html#stripy.cartesian.Triangulation.nearest_vertex">nearest_vertex</a></code></li>
<li><code><a title="stripy.cartesian.Triangulation.nearest_vertices" href="cartesian.html#stripy.cartesian.Triangulation.nearest_vertices">nearest_vertices</a></code></li>
<li><code><a title="stripy.cartesian.Triangulation.neighbour_and_arc_simplices" href="cartesian.html#stripy.cartesian.Triangulation.neighbour_and_arc_simplices">neighbour_and_arc_simplices</a></code></li>
<li><code><a title="stripy.cartesian.Triangulation.neighbour_simplices" href="cartesian.html#stripy.cartesian.Triangulation.neighbour_simplices">neighbour_simplices</a></code></li>
<li><code><a title="stripy.cartesian.Triangulation.points" href="cartesian.html#stripy.cartesian.Triangulation.points">points</a></code></li>
<li><code><a title="stripy.cartesian.Triangulation.second_gradient_local" href="cartesian.html#stripy.cartesian.Triangulation.second_gradient_local">second_gradient_local</a></code></li>
<li><code><a title="stripy.cartesian.Triangulation.segment_midpoints" href="cartesian.html#stripy.cartesian.Triangulation.segment_midpoints">segment_midpoints</a></code></li>
<li><code><a title="stripy.cartesian.Triangulation.segment_midpoints_by_vertices" href="cartesian.html#stripy.cartesian.Triangulation.segment_midpoints_by_vertices">segment_midpoints_by_vertices</a></code></li>
<li><code><a title="stripy.cartesian.Triangulation.segment_tripoints" href="cartesian.html#stripy.cartesian.Triangulation.segment_tripoints">segment_tripoints</a></code></li>
<li><code><a title="stripy.cartesian.Triangulation.simplices" href="cartesian.html#stripy.cartesian.Triangulation.simplices">simplices</a></code></li>
<li><code><a title="stripy.cartesian.Triangulation.smoothing" href="cartesian.html#stripy.cartesian.Triangulation.smoothing">smoothing</a></code></li>
<li><code><a title="stripy.cartesian.Triangulation.uniformly_refine_triangulation" href="cartesian.html#stripy.cartesian.Triangulation.uniformly_refine_triangulation">uniformly_refine_triangulation</a></code></li>
<li><code><a title="stripy.cartesian.Triangulation.update_tension_factors" href="cartesian.html#stripy.cartesian.Triangulation.update_tension_factors">update_tension_factors</a></code></li>
<li><code><a title="stripy.cartesian.Triangulation.voronoi_points" href="cartesian.html#stripy.cartesian.Triangulation.voronoi_points">voronoi_points</a></code></li>
<li><code><a title="stripy.cartesian.Triangulation.voronoi_points_and_regions" href="cartesian.html#stripy.cartesian.Triangulation.voronoi_points_and_regions">voronoi_points_and_regions</a></code></li>
<li><code><a title="stripy.cartesian.Triangulation.x" href="cartesian.html#stripy.cartesian.Triangulation.x">x</a></code></li>
<li><code><a title="stripy.cartesian.Triangulation.y" href="cartesian.html#stripy.cartesian.Triangulation.y">y</a></code></li>
</ul>
</li>
</ul>
</dd>
</dl>
</section>
</article>
<nav id="sidebar">
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="stripy" href="index.html">stripy</a></code></li>
</ul>
</li>
<li><h3><a href="#header-classes">Classes</a></h3>
<ul>
<li>
<h4><code><a title="stripy.hybrid_st_meshes.warped_xy_mesh_sphere" href="#stripy.hybrid_st_meshes.warped_xy_mesh_sphere">warped_xy_mesh_sphere</a></code></h4>
</li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc"><cite>pdoc</cite> 0.8.1</a>.</p>
</footer>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad()</script>
</body>
</html>